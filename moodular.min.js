/**
 * Moodular - Carousel Framework
 * Copyright (c) 2014 Sylvain "GouZ" Gougouzian (sylvain@gougouzian.fr)
 * MIT (http://www.opensource.org/licenses/mit-license.php) licensed.
 * GNU GPL (http://www.gnu.org/licenses/gpl.html) licensed.
 */
!function(e){"use strict";var t=function(t,n,r,i){this.version="4.3";this.opts=n;this.ctrls=r;this.fxs=i;this.$element=e(t);this.init()};t.prototype={init:function(){this.current=0;this.next=-1;this.items=e(">"+this.opts.selector,this.$element);this.nbItems=this.items.length;this.$element.css("position","relative");this.items.css({position:"absolute",top:0,left:0});var t=this;this.$element.on("moodular.prev",function(){if(t.next==-1){t.next=t.current-t.opts.step;if(t.next<0)t.next+=t.nbItems}}).on("moodular.next",function(){if(t.next==-1)t.next=(t.current+t.opts.step)%t.nbItems}).on("moodular.prev moodular.next",function(){t.stop();t.items.removeClass("active").eq(t.next).addClass("active")}).on("moodular.end",function(){if(t.opts.timer)t.timer=setTimeout(function(){t.start()},t.opts.timer)});var n=this.opts.effects.split(" ");for(var r in n)if(e.isFunction(this.fxs[n[r]]))this.fxs[n[r]](this);var i=this.opts.controls.split(" ");for(var r in i)if(e.isFunction(this.ctrls[i[r]]))this.ctrls[i[r]](this);this.$element.on("moodular.prev moodular.next",function(){t.current=t.next;t.next=-1;t.speedTimer=setTimeout(function(){t.$element.trigger("moodular.end")},t.opts.speed)});this.items.eq(0).addClass("active");if(this.opts.timer)this.timer=setTimeout(function(){t.start()},this.opts.timer)},start:function(){this.$element.trigger("moodular.next")},stop:function(){clearTimeout(this.timer);clearTimeout(this.speedTimer)},moveTo:function(e,t){var n=e%this.nbItems;if(n!=this.current){this.next=n;this.$element.trigger("moodular."+(t=="prev"?"prev":"next"))}}};e.fn.moodular=function(n,r,i){return this.each(function(){var s=e(this),o=s.data("moodular");if(!o)s.data("moodular",o=new t(this,e.extend({},e.fn.moodular.defaults,s.data(),typeof n=="object"&&n),e.extend({},e.fn.moodular.controls),e.extend({},e.fn.moodular.effects)));if(typeof n=="string")o[n](r,i)})};e.fn.moodular.defaults={speed:500,timer:0,step:1,effects:"",controls:"",easing:"",selector:"li",queue:false};e.fn.moodular.controls={};e.fn.moodular.effects={}}(window.jQuery);!function(e){e.extend(e.fn.moodular.effects,{animate:function(t){var n=function(n){var r=e("[data-mood]",t.items.eq(n));r.css("margin",0).each(function(){var n=e(this),r=n.data("mood-animation"),i,s;n.data("mood-ghost").css("opacity",0);if(typeof r.distance=="undefined")r.distance="100%";if(r.effects.indexOf("left")>=0)i=r.distance;if(r.effects.indexOf("right")>=0)i="-"+r.distance;if(r.effects.indexOf("top")>=0)s=r.distance;if(r.effects.indexOf("bottom")>=0)s="-"+r.distance;var o=n.data("mood-ghost").position();n.stop().show().css({left:o.left,top:o.top,opacity:r.effects.indexOf("fade")>=0?0:1,"margin-left":i,"margin-top":s}).data("mood-ghost").css("visibility","hidden");clearTimeout(n.data("mood-timer"));n.data("mood-timer",setTimeout(function(){n.animate({margin:0,opacity:1},t.opts.speed*r.speed,r.easing,function(){n.hide();n.data("mood-ghost").css("visibility","visible").css("opacity",1);})},r.delay))})};e("[data-mood]",t.$element).each(function(){var t=e(this),n=t.clone(),r=t.position(),i=t.data("mood").split(";"),s={};t.removeAttr("data-mood");for(var o in i){var u=i[o].split(":");s[e.trim(u[0])]=e.trim(u[1])}if(typeof s.speed==="undefined")s.speed=1;if(s.speed<=0)s.speed=1;if(typeof s.effects==="undefined")s.effects="left";if(typeof s.easing==="undefined")s.easing="";if(typeof s.delay==="undefined")s.delay=0;n.css({position:"absolute",margin:0}).data({"mood-animation":s,"mood-ghost":t,"mood-timer":null});t.parent().append(n)});n(t.current);t.$element.on("moodular.prev moodular.next",function(){n(t.next)})}})}(window.jQuery);!function(e){e.extend(e.fn.moodular.effects,{bottom:function(t){if(typeof t.opts.view==="undefined")t.opts.view=1;var n=100/t.opts.view;t.items.css("top","100%").height(n+"%");for(var r=0;r<t.opts.view+t.opts.step;r++)t.items.eq(r).css("top",100-(r+1)*n+"%");var i="="+n*t.opts.step+"%";t.$element.on("moodular.next",function(){if(t.opts.view==1){t.items.eq(t.current).css("top",0).animate({top:"+"+i},{duration:t.opts.speed,easing:t.opts.easing,queue:t.opts.queue,complete:function(){e(this).css("top","100%")}});t.items.eq(t.next).css("top","-100%").animate({top:0},{duration:t.opts.speed,easing:t.opts.easing,queue:t.opts.queue})}else if(t.opts.view<t.nbItems)for(var r=0-t.opts.step;r<t.opts.view+t.opts.step;r++)t.items.eq((t.current+r)%t.nbItems).css("top",100-(r+1)*n+"%").animate({top:"+"+i},{duration:t.opts.speed,easing:t.opts.easing,queue:t.opts.queue})}).on("moodular.prev",function(){if(t.opts.view==1){t.items.eq(t.current).css("top",0).animate({top:"-"+i},{duration:t.opts.speed,easing:t.opts.easing,queue:t.opts.queue,complete:function(){e(this).css("top","-100%")}});t.items.eq(t.next).css("top","100%").animate({top:0},{duration:t.opts.speed,easing:t.opts.easing,queue:t.opts.queue})}else if(t.opts.view<t.nbItems){for(var r=0;r<t.opts.view;r++)t.items.eq((t.current+r)%t.nbItems).css("top",100-(r+1)*n+"%").animate({top:"-"+i},{duration:t.opts.speed,easing:t.opts.easing,queue:t.opts.queue});for(var r=1;r<=t.opts.step;r++)t.items.eq((t.current-r)%t.nbItems).css("top",100+(r-1)*n+"%").animate({top:"-"+i},{duration:t.opts.speed,easing:t.opts.easing,queue:t.opts.queue})}})}})}(window.jQuery);!function(e){e.extend(e.fn.moodular.effects,{fade:function(t){t.items.css({opacity:0,"z-index":1});if(typeof t.opts.view==="undefined")t.opts.view=1;for(var n=0;n<t.opts.view;n++)t.items.eq(n).css({opacity:1,"z-index":2});t.$element.on("moodular.prev moodular.next",function(){for(var n=0;n<t.opts.view;n++)t.items.eq((t.current+n)%t.nbItems).stop().css({opacity:1,"z-index":2}).animate({opacity:0},{duration:t.opts.speed,easing:t.opts.easing,queue:t.opts.queue,complete:function(){e(this).css("z-index",1)}});for(var n=0;n<t.opts.view;n++)t.items.eq((t.next+n)%t.nbItems).stop().css({opacity:1,"z-index":1}).animate({opacity:1},{duration:t.opts.speed,easing:t.opts.easing,queue:t.opts.queue,complete:function(){e(this).css("z-index",2)}})})}})}(window.jQuery);!function(e){e.extend(e.fn.moodular.effects,{left:function(t){if(typeof t.opts.view==="undefined")t.opts.view=1;var n=100/t.opts.view;t.items.css("left","100%").width(n+"%");for(var r=0;r<t.opts.view+t.opts.step;r++)t.items.eq(r).css("left",r*n+"%");var i="="+n*t.opts.step+"%";var s={duration:t.opts.speed,easing:t.opts.easing,queue:t.opts.queue};t.$element.on("moodular.next",function(){if(t.opts.view==1){t.items.eq(t.current).css("left",0).animate({left:"-"+i},{duration:t.opts.speed,easing:t.opts.easing,queue:t.opts.queue,complete:function(){e(this).css("left","-100%")}});t.items.eq(t.next).css("left","100%").animate({left:0},s)}else if(t.opts.view<t.nbItems)for(var r=0;r<t.opts.view+t.opts.step;r++)t.items.eq((t.current+r)%t.nbItems).css("left",r*n+"%").animate({left:"-"+i},s)}).on("moodular.prev",function(){if(t.opts.view==1){t.items.eq(t.current).css("left",0).animate({left:"+"+i},{duration:t.opts.speed,easing:t.opts.easing,queue:t.opts.queue,complete:function(){e(this).css("left","100%")}});t.items.eq(t.next).css("left","-100%").animate({left:0},s)}else if(t.opts.view<t.nbItems){for(var r=0;r<t.opts.view;r++)t.items.eq((t.current+r)%t.nbItems).css("left",r*n+"%").animate({left:"+"+i},s);for(var r=1;r<=t.opts.step;r++)t.items.eq((t.current-r)%t.nbItems).css("left",-r*n+"%").animate({left:"+"+i},s)}})}})}(window.jQuery);!function(e){e.extend(e.fn.moodular.effects,{mosaic:function(t){if(typeof t.opts.slices==="undefined")t.opts.slices=[6,6];if(typeof t.opts.mode==="undefined")t.opts.mode="random";t.items.hide().eq(0).show();var n=t.opts.slices[1],r=t.opts.slices[0],i=t.$element.width(),s=t.$element.height(),o=i/r,u=s/n;t.$element.on("moodular.prev moodular.next",function(){e("#mosaic_wrapper",t.$element).remove();t.items.hide().eq(t.next).show().css("z-index",1);var a=t.items.eq(t.current).html();c="";for(var f=0;f<r;f++)for(var l=0;l<n;l++)c+='<div style="position:absolute;left:'+f*o+"px;top:"+l*u+"px;width:"+o+"px;height:"+u+'px;overflow:hidden;"><div style="margin-left:-'+f*o+"px;margin-top:-"+l*u+"px;width:"+i+"px;height:"+s+'px">'+a+"</div></div>";t.$element.prepend("<"+t.opts.selector+' id="mosaic_wrapper" style="z-index:2;position:absolute;">'+c+"</div>");e("#mosaic_wrapper>div",t.$element).css("opacity",1).each(function(i){var s=e(this);var o=n*r,u;if(t.opts.mode=="random")u=t.opts.speed*.5*Math.ceil(Math.random()*(o-1))/o;else if(t.opts.mode=="crawler")u=t.opts.speed*.5*i/o;setTimeout(function(){s.animate({opacity:0},u,t.opts.easing)},u)});clearTimeout(t.mTimer);t.mTimer=setTimeout(function(){e("#mosaic_wrapper",t.$element).remove()},t.opts.speed)})}})}(window.jQuery);!function(e){e.extend(e.fn.moodular.effects,{resize:function(t){if(typeof t.opts.ratio==="undefined")t.opts.ratio=0;if(t.opts.ratio)e(window).on("resize.moodular",function(){t.$element.height(parseInt(t.$element.width())/t.opts.ratio)}).trigger("resize.moodular")}})}(window.jQuery);!function(e){e.extend(e.fn.moodular.effects,{right:function(t){if(typeof t.opts.view==="undefined")t.opts.view=1;var n=100/t.opts.view;t.items.css("left","100%").width(n+"%");for(var r=0;r<t.opts.view+t.opts.step;r++)t.items.eq(r).css("left",100-(r+1)*n+"%");var i="="+n*t.opts.step+"%";t.$element.on("moodular.next",function(){if(t.opts.view==1){t.items.eq(t.current).css("left",0).animate({left:"+"+i},{duration:t.opts.speed,easing:t.opts.easing,queue:t.opts.queue,complete:function(){e(this).css("left","100%")}});t.items.eq(t.next).css("left","-100%").animate({left:0},{duration:t.opts.speed,easing:t.opts.easing,queue:t.opts.queue})}else if(t.opts.view<t.nbItems)for(var r=0-t.opts.step;r<t.opts.view+t.opts.step;r++)t.items.eq((t.current+r)%t.nbItems).css("left",100-(r+1)*n+"%").animate({left:"+"+i},{duration:t.opts.speed,easing:t.opts.easing,queue:t.opts.queue})}).on("moodular.prev",function(){if(t.opts.view==1){t.items.eq(t.current).css("left",0).animate({left:"-"+i},{duration:t.opts.speed,easing:t.opts.easing,queue:t.opts.queue,complete:function(){e(this).css("left","-100%")}});t.items.eq(t.next).css("left","100%").animate({left:0},{duration:t.opts.speed,easing:t.opts.easing,queue:t.opts.queue})}else if(t.opts.view<t.nbItems){for(var r=0;r<t.opts.view;r++)t.items.eq((t.current+r)%t.nbItems).css("left",100-(r+1)*n+"%").animate({left:"-"+i},{duration:t.opts.speed,easing:t.opts.easing,queue:t.opts.queue});for(var r=1;r<=t.opts.step;r++)t.items.eq((t.current-r)%t.nbItems).css("left",100+(r-1)*n+"%").animate({left:"-"+i},{duration:t.opts.speed,easing:t.opts.easing,queue:t.opts.queue})}})}})}(window.jQuery);!function(e){e.extend(e.fn.moodular.effects,{slide:function(t){if(typeof t.opts.direction==="undefined")t.opts.direction="left";t.items.css("z-index",1).eq(0).css("z-index",2);var n={};if(t.opts.direction=="top")n["top"]="-100%";else if(t.opts.direction=="bottom")n["top"]="100%";else if(t.opts.direction=="right")n["left"]="100%";else n["left"]="-100%";t.$element.on("moodular.next",function(){t.items.eq(t.next).css("z-index",2);t.items.eq(t.current).css("z-index",3).animate(n,{duration:t.opts.speed,easing:t.opts.easing,queue:t.opts.queue,complete:function(){e(this).css({"z-index":1,left:0,top:0})}})});t.$element.on("moodular.prev",function(){t.items.css("z-index",1);t.items.eq(t.current).css("z-index",2);t.items.eq(t.next).css("z-index",3).css(n).animate({left:0,top:0},{duration:t.opts.speed,easing:t.opts.easing,queue:t.opts.queue,complete:function(){t.items.css("z-index",1);e(this).css("z-index",2)}})})}})}(window.jQuery);!function(e){e.extend(e.fn.moodular.effects,{stripes:function(t){if(typeof t.opts.stripes==="undefined")t.opts.stripes=1;if(typeof t.opts.orientation==="undefined")t.opts.orientation="vertical";t.items.hide().eq(0).show();var n=t.opts.stripes,r="width",i="height",s=t.opts.orientation=="vertical"?r:i,o=s==r,u=o?i:r,a=o?"left":"top",f=o?"top":"left",l=parseInt(t.$element.css(s)),h=parseInt(t.$element.css(u)),p=l/n;t.$element.on("moodular.prev moodular.next",function(){e("#stripes_wrapper",t.$element).remove();t.items.hide().eq(t.next).show().css("z-index",1);var r=t.items.eq(t.current).html();c="";for(var i=0;i<n;i++)c+='<div style="position:absolute;'+a+":"+i*p+"px;"+f+":"+"0;"+s+":"+p+"px;"+u+":"+h+'px;overflow:hidden;"><div style="margin-'+a+":-"+i*p+"px;"+s+":"+l+"px;"+u+":"+h+'px">'+r+"</div></div>";t.$element.prepend("<"+t.opts.selector+' id="stripes_wrapper" style="z-index:2;position:absolute;">'+c+"</div>");e("#stripes_wrapper>div",t.$element).each(function(n){var r={};r[f]=n%2?"100%":"-100%";e(this).animate(r,t.opts.speed*.75,t.opts.easing)});clearTimeout(t.mTimer);t.mTimer=setTimeout(function(){e("#stripes_wrapper",t.$element).remove()},t.opts.speed)})}})}(window.jQuery);!function(e){e.extend(e.fn.moodular.effects,{top:function(t){if(typeof t.opts.view==="undefined")t.opts.view=1;var n=100/t.opts.view;t.items.css("top","100%").height(n+"%");for(var r=0;r<t.opts.view+t.opts.step;r++)t.items.eq(r).css("top",r*n+"%");var i="="+n*t.opts.step+"%";t.$element.on("moodular.next",function(){if(t.opts.view==1){t.items.eq(t.current).css("top",0).animate({top:"-"+i},{duration:t.opts.speed,easing:t.opts.easing,queue:t.opts.queue,complete:function(){e(this).css("top","-100%")}});t.items.eq(t.next).css("top","100%").animate({top:0},{duration:t.opts.speed,easing:t.opts.easing,queue:t.opts.queue})}else if(t.opts.view<t.nbItems)for(var r=0;r<t.opts.view+t.opts.step;r++)t.items.eq((t.current+r)%t.nbItems).css("top",r*n+"%").animate({top:"-"+i},{duration:t.opts.speed,easing:t.opts.easing,queue:t.opts.queue})}).on("moodular.prev",function(){if(t.opts.view==1){t.items.eq(t.current).css("top",0).animate({top:"+"+i},{duration:t.opts.speed,easing:t.opts.easing,queue:t.opts.queue,complete:function(){e(this).css("top","100%")}});t.items.eq(t.next).css("top","-100%").animate({top:0},{duration:t.opts.speed,easing:t.opts.easing,queue:t.opts.queue})}else if(t.opts.view<t.nbItems){for(var r=0;r<t.opts.view;r++)t.items.eq((t.current+r)%t.nbItems).css("top",r*n+"%").animate({top:"+"+i},{duration:t.opts.speed,easing:t.opts.easing,queue:t.opts.queue});for(var r=1;r<=t.opts.step;r++)t.items.eq((t.current-r)%t.nbItems).css("top",-r*n+"%").animate({top:"+"+i},{duration:t.opts.speed,easing:t.opts.easing,queue:t.opts.queue})}})}})}(window.jQuery);!function(e){e.extend(e.fn.moodular.controls,{buttons:function(e){if(typeof e.opts.view==="undefined")e.opts.view=1;if(e.nbItems<=e.opts.view){e.opts.buttonPrev.hide();e.opts.buttonNext.hide()}e.opts.buttonPrev.on("click",function(){e.$element.trigger("moodular.prev");return false});e.opts.buttonNext.on("click",function(){e.$element.trigger("moodular.next");return false})}})}(window.jQuery);!function(e){e.extend(e.fn.moodular.controls,{keys:function(t){if(typeof t.opts.keyPrev==="undefined")t.opts.keyPrev=37;if(typeof t.opts.keyNext==="undefined")t.opts.keyNext=39;e(document).on("keydown",function(e){if(e.keyCode==t.opts.keyPrev){t.$element.trigger("moodular.prev");return false}else if(e.keyCode==t.opts.keyNext){t.$element.trigger("moodular.next");return false}})}})}(window.jQuery);!function(e){e.extend(e.fn.moodular.controls,{nav:function(t){if(typeof t.opts.navView==="undefined")t.opts.navView=t.nbItems;if(typeof t.opts.navEffects==="undefined")t.opts.navEffects="";if(typeof t.opts.navControls==="undefined")t.opts.navControls="";if(typeof t.opts.navButtonPrev==="undefined")t.opts.navButtonPrev="";if(typeof t.opts.navButtonNext==="undefined")t.opts.navButtonNext="";if(typeof t.opts.navSelector==="undefined")t.opts.navSelector="li";t.opts.navWrapper.moodular({timer:t.opts.timer,view:t.opts.navView,effects:t.opts.navEffects,controls:t.opts.navControls,buttonPrev:t.opts.navButtonPrev,buttonNext:t.opts.navButtonNext,speed:t.opts.speed});t.opts.timer=0;var n=t.opts.navWrapper.data("moodular");n.$element.on({"moodular.next":function(){t.next=n.current;t.$element.trigger("moodular.next")},"moodular.prev":function(){t.next=n.current;t.$element.trigger("moodular.prev")}});e(t.opts.navSelector,t.opts.navWrapper).each(function(t){e(this).data("index",t)}).on({mouseenter:function(){n._current=n.current;n.stop();e(">"+t.opts.navSelector,t.opts.navWrapper).removeClass("active");e(this).addClass("active");t.next=e(this).data("index");var r=t.opts.speed;t.opts.speed=0;t.$element.trigger("moodular.next");t.opts.speed=r},mouseleave:function(){n.current=n._current;n.next=-1;n.start()}})}})}(window.jQuery);!function(e){e.extend(e.fn.moodular.controls,{pagination:function(t){var n="";for(var r=0;r<t.nbItems;r++)n+='<li><a href="#" data-index="'+r+'">'+(r+1)+"</a></li>";t.opts.pagination.append(n);e(">li>a",t.opts.pagination).on("click",function(){if(!e(this).parent().hasClass("active"))t.moveTo(e(this).data("index"),"next");return false});e(">li",t.opts.pagination).eq(0).addClass("active");t.$element.on("moodular.prev moodular.next",function(){e(">li",t.opts.pagination).removeClass("active").eq(t.next).addClass("active")})}})}(window.jQuery);!function(e){e.extend(e.fn.moodular.controls,{startOnMouseOver:function(e){var t=e.opts.timer,n=false;e.opts.timer=0;e.$element.on({mouseenter:function(){if(!n){e.opts.timer=t;n=true;e.$element.trigger("moodular.next")}},mouseleave:function(){e.opts.timer=0;n=false;e.stop()}})}})}(window.jQuery);!function(e){e.extend(e.fn.moodular.controls,{stopOnMouseOver:function(e){e.$element.on({mouseenter:function(){e.stop()},mouseleave:function(){e.start()}})}})}(window.jQuery);!function(e){e.extend(e.fn.moodular.controls,{touch:function(e){var t=null,n=null;e.$element.on({touchstart:function(e){var n=e.originalEvent;t=n.targetTouches[0].pageX},touchmove:function(e){e.preventDefault();var t=e.originalEvent;n=t.targetTouches[0].pageX},touchend:function(){if(t>n)e.$e.trigger("moodular.next");else if(t<n)e.$e.trigger("moodular.prev");t=null;n=null;return false}})}})}(window.jQuery)
